<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="JM-search">

	<select id="getRoomList" resultType="com.javaex.vo.ChallengeVo">
		<![CDATA[ 
			select
				r.roomNum, -- 룸넘버
			    rs.roomStatusNum, -- 방 상태 넘버
				rt.roomTypeName,  -- 룸 유형
			    r.roomThumbNail,  -- 룸 대표이미지
			    r.roomTitle,  -- 룸 제목
			    r.roomStartDate, -- 시작날짜
				p.periodType,  -- 기간
			    r.roomMinNum,  -- 최소인원
			    r.roomMaxNum,  -- 최대인원
			    r.roomEnterPoint, -- 입장포인트
			    r.roomEnterRate, -- 입장성실도
			    c.categoryName, -- 카테고리
			    r.roomKEyword, -- 키워드
			    re.regionNum  -- 지역
			from roomInfo r
			join roomStatus rs on rs.roomStatusNum = r.roomStatusNum
			join roomType rt on r.roomTypeNum = rt.roomTypeNum
			join period p on p.periodNum = r.periodNum
			join categories c on c.categoryNum = r.categoryNum
			join regions re on re.regionNum = r.regionNum
			where rs.roomStatusNum = 2;
		]]>
	</select>
    
</mapper>
